<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<title>Tee Box Bets</title>
<link rel="stylesheet" href="style.css">

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#041a13">
<link rel="apple-touch-icon" href="icons/icon-192.png">
</head>

<body>

<header>
<button id="navBack" onclick="goBack()">Back</button>
<h1 id="appTitle">Tee Box Bets</h1>
</header>

<main>

<!-- ===== HOME ===== -->

<section id="step-home">
<button onclick="show('round-setup')">Track a Round</button>
<button onclick="goGameSelect()">Bet</button>
<button onclick="openProfile()">Player Profile</button>
</section>

<!-- ===== PROFILE ===== -->

<section id="profile-screen" class="hidden">
<h2>Your Profile</h2>

<div class="profile-tabs">
<button class="profile-tab active" onclick="showProfileTab('summaryTab')">Summary</button>
<button class="profile-tab" onclick="showProfileTab('roundsTab')">Rounds</button>
<button class="profile-tab" onclick="showProfileTab('bettingTab')">Betting</button>
</div>

<div id="summaryTab" class="profile-tab-content">

<div class="profile-card">
<h3 id="profileNameDisplay"></h3>
<p>Handicap: <strong id="profileHandicapDisplay"></strong></p>
<p>Rounds Played: <strong id="profileRounds"></strong></p>
<p>Average Score: <strong id="profileAvg"></strong></p>
</div>

</div>

<div id="bettingTab" class="profile-tab-content hidden">

<div class="profile-card">
<h3>Betting Stats</h3>
<p>Total +/- : <strong id="betNet"></strong></p>
<p>Games Played: <strong id="betGames"></strong></p>
<button id="resetBettingBtn" style="background:#a83232;margin-top:10px">
Reset Betting Stats
</button>
<h3 style="margin-top:20px">Most Played With</h3>
<div id="opponentList"></div>
</div>

</div>

<div id="roundsTab" class="profile-tab-content hidden">

<div class="profile-card">
<h3>Round History</h3>

<table style="width:100%;font-size:14px">
<tr>
<th style="padding:8px 10px;">Date</th>
<th style="padding:8px 10px;">Course</th>
<th style="padding:8px 10px;">Par</th>
<th style="padding:8px 10px;">Score</th>
<th style="padding:8px 10px;border-left:1px solid rgba(255,255,255,.15);">+/-</th>
<th style="padding:8px 10px;border-left:1px solid rgba(255,255,255,.15);">Diff</th>
<th style="padding:8px 10px;">
Diffℹ️
<span class="diff-info" onclick="alert('Differential measures how your score compares to course difficulty. Lower is better. It’s used to calculate your handicap.')">ℹ️</span>
</th>
</tr>

<tbody id="roundHistoryTable"></tbody>
</table>

</div>
</div>

<button onclick="editProfile()">Edit Profile</button>
</section>

<!-- ===== PROFILE SETUP ===== -->

<section id="profile-setup" class="hidden">
<h2>Create Your Player Profile</h2>

<label>Your Name</label>
<input id="profileName" type="text">

<label>Current Handicap (optional)</label>
<input id="profileHandicap" type="number" step="0.1">

<button id="profileSaveBtn" onclick="saveProfileChanges()">Save Profile</button>
</section>

<!-- ===== ROUND SETUP ===== -->

<section id="round-setup" class="hidden">

<h3>Track a Round</h3>

<!-- ===== NEW ROUND ===== -->

<label>Course Name</label>
<input id="courseName" type="text">

<label>Course Rating</label>
<input id="courseRating" type="number" inputmode="decimal">

<label>Slope Rating</label>
<input id="courseSlope" type="number" inputmode="numeric">

<label>Holes</label>
<select id="roundHoles">
<option value="9">9 Holes</option>
<option value="18">18 Holes</option>
</select>

<button onclick="startRoundTracking()">Start New Round</button>

<hr style="margin:20px 0;opacity:.3">

<!-- ===== MANUAL ROUND ===== -->

<button onclick="toggleManualRound()" id="manualToggleBtn">
Add Previous Round
</button>

<div id="manualRoundBox" class="hidden">

<label>Date (MM/DD/YYYY)</label>
<input id="manualDate" type="date">

<label>Course Name</label>
<input id="manualCourse">

<label>Course Rating</label>
<input id="manualRating" inputmode="decimal">

<label>Slope Rating</label>
<input id="manualSlope" inputmode="numeric">

<label>Total Strokes</label>
<input id="manualStrokes" type="number" inputmode="numeric">

<label>Holes Played</label>
<select id="manualHoles">
<option value="9">9</option>
<option value="18">18</option>
</select>

<button id="manualSaveBtn">Save Previous Round</button>

</div>


</section>

<!-- ===== ROUND PLAY ===== -->

<section id="round-play" class="hidden">

<h3 id="roundHoleDisplay"></h3>
<h4 id="roundCourseInfo"></h4>

<label>Par</label>

<div id="parButtons" style="display:flex;gap:10px">

<button class="par-btn" onclick="setPar(3,this)">Par 3</button>
<button class="par-btn" onclick="setPar(4,this)">Par 4</button>
<button class="par-btn" onclick="setPar(5,this)">Par 5</button>

</div>

<input type="hidden" id="holePar" value="4">

<label>Score</label>

<div id="scoreButtons" class="score-buttons">
<button onclick="setScore(1)">1</button>
<button onclick="setScore(2)">2</button>
<button onclick="setScore(3)">3</button>
<button onclick="setScore(4)">4</button>
<button onclick="setScore(5)">5</button>
<button onclick="setScore(6)">6</button>
<button onclick="setScore(7)">7</button>
<button onclick="setScore(8)">8+</button>
</div>

<input id="holeScore" type="number" inputmode="numeric" class="hidden">
<div style="display:flex;gap:8px;margin-top:12px">

<button class="stat-toggle" id="firToggle">FIR</button>
<button class="stat-toggle" id="girToggle">GIR</button>

</div>

<div style="display:flex;gap:12px;margin-top:12px">

<input id="holePutts" type="number" inputmode="numeric" placeholder="Putts">

<input id="holePenalties" type="number" inputmode="numeric" placeholder="Penalties">

</div>

<h4 id="roundLiveStats"></h4>

<button onclick="undoRoundHole()">Undo</button>
<button onclick="openScorecard()">Scorecard</button>
<button onclick="submitHoleScore()">Next Hole</button>

<div style="margin-top:30px">
<button style="background:#a83232" onclick="cancelTrackedRound()">
End Round (Discard)
</button>
</div>

</section>

<!-- ===== GAME SELECT ===== -->

<section id="step-game" class="hidden">
<button onclick="selectGame('skins')">Skins</button>
<button onclick="selectGame('vegas')">Vegas</button>
<button onclick="selectGame('nassau')">Nassau</button>
<button onclick="showRules()">Rules</button>
</section>

<section id="rules-screen" class="hidden">
<h3>Skins</h3>
<p>Wager per player. Lowest score per hole wins. Ties carry. Birdie adds one wager. Eagle adds two wagers.</p>

<h3>Vegas</h3>
<p>Team game. Scores combine to form the lowest number (4 and 3 becomes 34). Birdie or better flips the losing teams score. Difference in teams scores = Points. Points × wager per point = Payout.</p>

<h3>Nassau</h3>
<p>Team match: Front 9, Back 9, Total Round. Each sections has it's own wagers. 3 total bets to be won.</p>
</section>

<!-- ===== PLAY STYLE ===== -->

<section id="step-style" class="hidden">

<p id="lockedNotice" class="hidden">
This game is played with two teams of 2
</p>

<label id="playStyleLabel">Play Style</label>
<select id="playStyle">
<option value="ffa">Free For All</option>
<option value="teams">Teams</option>
</select>

<label id="playerCountLabel">Number of Players</label>
<select id="playerCount">
<option>2</option>
<option>3</option>
<option>4</option>
</select>

<button onclick="nextTeams()">Next</button>
</section>

<!-- ===== TEAMS ===== -->

<section id="step-teams" class="hidden">
<input id="teamAName" placeholder="Team 1 Name">
<input id="teamBName" placeholder="Team 2 Name">
<button onclick="nextPlayers()">Next</button>
</section>

<!-- ===== PLAYERS ===== -->

<section id="step-players" class="hidden">

<h4 id="teamALabel">Team 1</h4>
<div id="teamAInputs"></div>

<h4 id="teamBLabel">Team 2</h4>
<div id="teamBInputs"></div>

<button onclick="nextSettings()">Next</button>
</section>

<!-- ===== SETTINGS ===== -->

<section id="step-settings" class="hidden">

<div id="baseWagerWrapper" class="money-input">
<span>$</span>
<input id="baseWager" type="number" inputmode="decimal">
</div>

<p id="wagerLabel"></p>

<select id="holeLimit">
<option value="9">9 Holes</option>
<option value="18">18 Holes</option>
</select>

<div id="nassauWagers" class="hidden">

<label>Front 9 Wager</label>
<div class="money-input">
<span>$</span><input id="frontWager" type="number" inputmode="decimal">
</div>

<label>Back 9 Wager</label>
<div class="money-input">
<span>$</span><input id="backWager" type="number" inputmode="decimal">
</div>

<label>Total Round Wager</label>
<div class="money-input">
<span>$</span><input id="totalWager" type="number" inputmode="decimal">
</div>

<p>Nassau always plays 18 holes</p>
</div>


<button onclick="startRound()">Start</button>
</section>

<!-- ===== GAME SCREEN ===== -->

<section id="game-screen" class="hidden">

<h3 id="holeDisplay"></h3>
<h3 id="potDisplay"></h3>


<div id="skinsBox">

<div id="winnerButtons"></div>

<button id="tieBtn">Tie</button>

<button onclick="undoHole()">Undo Previous Hole</button>

<div style="margin-top:10px">
<label><input type="checkbox" id="birdieToggle"> Birdie (+1)</label>
<label><input type="checkbox" id="eagleToggle"> Eagle (+2)</label>
</div>
</div>

<div id="nassauBox" class="hidden">
<div id="nassauWinners"></div>
<button id="nassauTieBtn">Tie Hole</button>
</div>



<div id="vegasBox" class="hidden">
<div id="teamAPlayers"></div>
<input id="a1" type="number" inputmode="numeric">
<input id="a2" type="number" inputmode="numeric">
<div id="teamBPlayers"></div>
<input id="b1" type="number" inputmode="numeric">
<input id="b2" type="number" inputmode="numeric">
<label><input type="checkbox" id="birdieFlip"> Birdie Flip</label>
<button onclick="finishVegasHole()">Finish Hole</button>
</div>

<button
style="background:#b83232;margin-top:20px"
onclick="endRoundNow()">
End Round
</button>
<button id="sideBetBtn" class="hidden">Side Bet</button>
<h3>Leaderboard</h3>
<div id="leaderboard"></div>
</section>

<!-- ===== MODALS ===== -->

<div id="scorecardModal" class="modal hidden">
<div class="modal-box">
<h3>Scorecard</h3>
<div id="scorecardTable"></div>
<button onclick="closeScorecard()">Close</button>
</div>
</div>

<div id="roundDetailModal" class="modal hidden">
<div class="modal-box">
<div id="roundDetailContent"></div>
<button onclick="closeRoundDetail()">Close</button>
</div>
</div>

<div id="leaderboardModal" class="modal hidden">
<div class="modal-box">
<h3>Round Results</h3>
<div id="leaderboardModalList"></div>
<button id="leaderboardFinishBtn">Finish Round</button>
</div>
</div>

<div id="sideBetModal" class="modal hidden">
<div class="modal-box">
<h3>Side Bet</h3>
<div class="money-input">
<span>$</span>
<input id="sideAmount" type="number" inputmode="decimal">
</div>
<select id="sideMode">
<option value="player">Per Player</option>
<option value="team">Per Team</option>
</select>
<div id="sideWinners"></div>
<button onclick="sideBetModal.classList.add('hidden')">Cancel</button>
</div>
</div>


</main>

<script src="games/skins.js"></script>
<script src="games/vegas.js"></script>
<script src="games/nassau.js"></script>
<script src="games/sidebets.js"></script>
<script src="app.js"></script>

<script>
if ("serviceWorker" in navigator) {
navigator.serviceWorker.register("./service-worker.js");
}
</script>

</body>
</html>